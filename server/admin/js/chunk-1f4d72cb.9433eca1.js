(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f4d72cb"],{"31c6":function(t,e,a){},"447a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AdminList"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认不开启游客登录，添加 'Tourist' 类型管理员开启游客登录",placement:"top"}},[a("el-button",{attrs:{type:"primary addDialog",plain:""},on:{click:function(e){t.openDialog=!0}}},[a("div",[a("i",{staticClass:"el-icon-circle-plus"}),a("span",[t._v(" 添加管理员")])])])],1),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"管理员列表"}},[t.tableData?a("el-table",{staticClass:"table",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"_id",label:"编号",width:"350"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"250"}}),a("el-table-column",{attrs:{prop:"role.type",label:"类型"}}),a("el-table-column",{staticClass:"option",attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-popconfirm",{attrs:{title:"确定删除该管理员吗?"},on:{onConfirm:function(a){return t.handleDelete(e.row._id)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[a("div",[t._v("删除")])])],1)],1)]}}],null,!1,770790673)})],1):t._e()],1),a("el-dialog",{attrs:{title:"信息添加",visible:t.openDialog},on:{"update:visible":function(e){t.openDialog=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules}},[a("el-form-item",{attrs:{label:"角色","label-width":t.formLabelWidth,prop:"role"}},[a("el-select",{attrs:{autocomplete:"off"},model:{value:t.formData.role,callback:function(e){t.$set(t.formData,"role",e)},expression:"formData.role"}},t._l(t.roleList,(function(t){return a("el-option",{key:t._id,attrs:{label:t.type,value:t._id}})})),1)],1),a("el-form-item",{attrs:{label:"名字","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"账号","label-width":t.formLabelWidth,prop:"account"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.openDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[a("div",[t._v("确 定")])])],1)],1)],1)],1)},i=[],l=a("8a43");function r(t){return Object(l["a"])({url:"/admin/edit",method:"post",data:t})}function n(t){return Object(l["a"])({url:"/admin/delete",method:"delete",params:t})}function s(t){return Object(l["a"])({url:"/admin/update",method:"put",data:t})}function u(t){return Object(l["a"])({url:"/admin/list",method:"get",params:t})}function c(t){return Object(l["a"])({url:"/role/list",method:"get",params:t})}var d={data(){return{tableData:[],openDialog:!1,formData:{id:"",role:"",name:"",account:"",password:""},formLabelWidth:"120px",roleList:[],rules:{role:{required:!0,message:"请选择角色",trigger:"change"},name:[{required:!0,message:"请输入名字",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],account:{required:!0,message:"请输入账号",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}}}},created(){this.initAdminList(),this.initRoleList()},methods:{async initAdminList(){const t=await u();this.tableData=t.data},async initRoleList(){const t=await c();this.roleList=t.data},async createAdmin(){const t=this.formData;let e;e=t.id?await s(t):await r(this.formData),this.formData={},0==e.status&&this.initAdminList(),this.openDialog=!1},submitForm(){this.$refs.formData.validate(t=>{t&&this.createAdmin()})},async handleDelete(t){const e=await n({id:t});0==e.status&&this.initAdminList()}}},m=d,p=(a("fdea"),a("2877")),f=Object(p["a"])(m,o,i,!1,null,null,null);e["default"]=f.exports},"4f2f":function(t,e,a){},"5d0e":function(t,e,a){"use strict";var o=a("7562"),i=a.n(o);i.a},7562:function(t,e,a){},b01c:function(t,e,a){"use strict";var o=a("31c6"),i=a.n(o);i.a},d87b:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._v("关于我")]),a("el-form",{attrs:{model:t.aboutForm,"label-width":"100px"},nativeOn:{submit:function(e){return e.preventDefault(),t.saveAbout(e)}}},[a("el-form-item",{attrs:{label:"LOGO :"}},[a("el-col",{attrs:{span:4}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.uploadHeaders,"show-file-list":!1,"on-success":t.handleThumbnailSuccess}},[t.aboutForm.logo?a("img",{staticClass:"avatar",attrs:{src:t.aboutForm.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"padding-bottom":"15px"},attrs:{label:"QQ : ",prop:"name"}},[a("el-input",{model:{value:t.aboutForm.qq,callback:function(e){t.$set(t.aboutForm,"qq",e)},expression:"aboutForm.qq"}})],1),a("el-form-item",{staticStyle:{"padding-bottom":"15px"},attrs:{label:"E-Mail : ",prop:"name"}},[a("el-input",{model:{value:t.aboutForm.e_mail,callback:function(e){t.$set(t.aboutForm,"e_mail",e)},expression:"aboutForm.e_mail"}})],1),a("el-form-item",{attrs:{label:"Github : ",prop:"name"}},[a("el-input",{model:{value:t.aboutForm.github,callback:function(e){t.$set(t.aboutForm,"github",e)},expression:"aboutForm.github"}})],1)],1)],1),a("el-form-item",{attrs:{label:"内容 :",prop:"contentMd"}},[a("markdown-editor",{staticClass:"me-write-editor",attrs:{editor:t.editor},on:{changeEdit:t.changeEdit}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},i=[],l=a("52d5"),r=a("f8bc"),n=a("8a43");function s(t){return Object(n["a"])({method:"put",url:"/about/update",data:t})}function u(){return Object(n["a"])({method:"get",url:"/about/info"})}var c={components:{MarkdownEditor:l["a"]},mixins:[r["a"]],data(){return{aboutForm:{id:"",logo:"",qq:"",e_mail:"",github:"",contentHtml:"",contentMd:""},editor:{value:"",ref:"",default_open:"edit",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,imagelink:!0,code:!0,fullscreen:!0,readmodel:!0,help:!0,undo:!0,redo:!0,trash:!1,ishljs:!0,navigation:!0,preview:!0}}}},mounted(){this.initAboutInfo()},methods:{async initAboutInfo(){const t=await u();t.data&&(this.aboutForm=Object.assign(this.aboutForm,t.data),this.aboutForm.id=t.data._id,this.editor.value=t.data.contentMd)},async saveAbout(){let t;this.aboutForm.id&&(t=this.aboutForm.id);const e=await s({id:t,about:this.aboutForm});0==e.status&&this.initAboutInfo()},handleThumbnailSuccess(t){0==t.status?(this.$message.success(""+t.msg),this.$set(this.aboutForm,"logo",t.data.url)):this.$message.error(""+t.msg)},changeEdit(t,e){this.aboutForm.contentMd=e,this.aboutForm.contentHtml=t}}},d=c,m=(a("5d0e"),a("2877")),p=Object(m["a"])(d,o,i,!1,null,"685b4046",null);e["default"]=p.exports},dc72:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FriendLink"},[a("el-button",{staticClass:"addDialog",attrs:{type:"primary",plain:""},on:{click:function(e){t.openDialog=!0}}},[a("div",[a("i",{staticClass:"el-icon-circle-plus"}),a("span",[t._v("添加友情链接")])])]),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"友情链接列表"}},[a("el-dialog",{attrs:{title:"信息添加",visible:t.openDialog},on:{"update:visible":function(e){t.openDialog=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules}},[a("el-form-item",{attrs:{label:"链接名称","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"链接地址","label-width":t.formLabelWidth,prop:"url"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),a("el-form-item",{attrs:{label:"链接描述","label-width":t.formLabelWidth,prop:"description"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.openDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.createLink}},[a("div",[t._v("确 定")])])],1)],1),t.tableData?a("el-table",{staticClass:"table",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"_id",label:"编号",width:"350"}}),a("el-table-column",{attrs:{prop:"title",label:"链接名字",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{on:{click:function(a){return t.openUrl(e.row)}}},[t._v(t._s(e.row.name))])]}}],null,!1,2849931055)}),a("el-table-column",{attrs:{prop:"url",label:"链接地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("a",{attrs:{href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])])]}}],null,!1,1224833120)}),a("el-table-column",{attrs:{prop:"description",label:"连接描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" "+t._s(e.row.description)+" ")])]}}],null,!1,3805769463)}),a("el-table-column",{staticClass:"option",attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{staticClass:"option-1",attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("div",[t._v("编辑")])]),a("el-popconfirm",{attrs:{title:"确定删除这个标签吗？"},on:{onConfirm:function(a){return t.handleDelete(e.row._id)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[a("div",[t._v("删除")])])],1)],1)]}}],null,!1,2694417669)})],1):t._e(),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalSize,"page-size":t.pageSize,"current-page":t.page},on:{"current-change":t.pageChange}})],1)],1)],1)],1)},i=[],l=a("8a43");function r(t){return Object(l["a"])({url:"/link/edit",method:"post",data:t})}function n(t){return Object(l["a"])({url:"/link/update",method:"put",data:t})}function s(t){return Object(l["a"])({url:"/link/delete",method:"delete",params:t})}function u(t){return Object(l["a"])({url:"/link/list",method:"get",params:t})}var c={data(){return{tableData:[],page:1,pageSize:8,totalSize:1,openDialog:!1,formData:{id:"",name:"",url:"",description:""},formLabelWidth:"120px",rules:{name:{required:!0,message:"请输入链接名称名称",tirgger:"blur"},url:{required:!0,message:"请输入链接URL",tirgger:"blur"},description:{required:!0,message:"请输入链接描述",tirgger:"blur"}}}},created(){this.initFriendLink()},methods:{openUrl(t){window.open(t.url)},async initFriendLink(){const{page:t,pageSize:e}=this,a=await u({page:t,pageSize:e});this.tableData=a.data.linkList,this.totalSize=a.data.totalSize},async createLink(){const t=this.formData;let e;e=t.id?await n(t):await r(this.formData),this.formData={},0==e.status&&this.initFriendLink(),this.openDialog=!1},async handleEdit(t){this.openDialog=!0,t&&(this.formData={id:t._id,name:t.name,url:t.url,description:t.description})},async handleDelete(t){const e=await s({id:t});0==e.status&&this.initFriendLink()},pageChange(t){this.page=t,this.initFriendLink()}}},d=c,m=(a("b01c"),a("2877")),p=Object(m["a"])(d,o,i,!1,null,null,null);e["default"]=p.exports},fdea:function(t,e,a){"use strict";var o=a("4f2f"),i=a.n(o);i.a}}]);
//# sourceMappingURL=chunk-1f4d72cb.9433eca1.js.map