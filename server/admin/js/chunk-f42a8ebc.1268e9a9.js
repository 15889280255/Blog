(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f42a8ebc"],{"077b":function(t,e,a){"use strict";var l=a("2685"),r=a.n(l);r.a},2685:function(t,e,a){},"447a":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AdminList"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认不开启游客登录，添加 'Tourist' 类型管理员开启游客登录",placement:"top"}},[a("el-button",{attrs:{type:"primary addDialog",plain:""},on:{click:function(e){t.openDialog=!0}}},[a("div",[a("i",{staticClass:"el-icon-circle-plus"}),a("span",[t._v(" 添加管理员")])])])],1),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"管理员列表"}},[t.tableData?a("el-table",{staticClass:"table",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"_id",label:"编号",width:"350"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"250"}}),a("el-table-column",{attrs:{prop:"role.type",label:"类型"}}),a("el-table-column",{staticClass:"option",attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-popconfirm",{attrs:{title:"确定删除该管理员吗?"},on:{onConfirm:function(a){return t.handleDelete(e.row._id)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[a("div",[t._v("删除")])])],1)],1)]}}],null,!1,770790673)})],1):t._e()],1),a("el-dialog",{attrs:{title:"信息添加",visible:t.openDialog},on:{"update:visible":function(e){t.openDialog=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules}},[a("el-form-item",{attrs:{label:"角色","label-width":t.formLabelWidth,prop:"role"}},[a("el-select",{attrs:{autocomplete:"off"},model:{value:t.formData.role,callback:function(e){t.$set(t.formData,"role",e)},expression:"formData.role"}},t._l(t.roleList,(function(t){return a("el-option",{key:t._id,attrs:{label:t.type,value:t._id}})})),1)],1),a("el-form-item",{attrs:{label:"名字","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"账号","label-width":t.formLabelWidth,prop:"account"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.openDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[a("div",[t._v("确 定")])])],1)],1)],1)],1)},r=[],o=a("8a43");function i(t){return Object(o["a"])({url:"/admin/edit",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/admin/delete",method:"delete",params:t})}function s(t){return Object(o["a"])({url:"/admin/update",method:"put",data:t})}function c(t){return Object(o["a"])({url:"/admin/list",method:"get",params:t})}function u(t){return Object(o["a"])({url:"/role/list",method:"get",params:t})}var m={data(){return{tableData:[],openDialog:!1,formData:{id:"",role:"",name:"",account:"",password:""},formLabelWidth:"120px",roleList:[],rules:{role:{required:!0,message:"请选择角色",trigger:"change"},name:[{required:!0,message:"请输入名字",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],account:{required:!0,message:"请输入账号",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}}}},created(){this.initAdminList(),this.initRoleList()},methods:{async initAdminList(){const t=await c();this.tableData=t.data},async initRoleList(){const t=await u();this.roleList=t.data},async createAdmin(){const t=this.formData;let e;e=t.id?await s(t):await i(this.formData),this.formData={},0==e.status&&this.initAdminList(),this.openDialog=!1},submitForm(){this.$refs.formData.validate(t=>{t&&this.createAdmin()})},async handleDelete(t){const e=await n({id:t});0==e.status&&this.initAdminList()}}},d=m,f=(a("fdea"),a("2877")),p=Object(f["a"])(d,l,r,!1,null,null,null);e["default"]=p.exports},"4f2f":function(t,e,a){},"8cdb":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"not-found"},[l("img",{attrs:{src:a("cb22"),alt:""}})])}],o={},i=o,n=(a("077b"),a("2877")),s=Object(n["a"])(i,l,r,!1,null,null,null);e["default"]=s.exports},"9d64":function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},bb51:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"home"},[l("img",{attrs:{alt:"Vue logo",src:a("9d64")}})])}],o={name:"Home"},i=o,n=a("2877"),s=Object(n["a"])(i,l,r,!1,null,null,null);e["default"]=s.exports},cb22:function(t,e,a){t.exports=a.p+"img/404.d8d07a1e.gif"},fdea:function(t,e,a){"use strict";var l=a("4f2f"),r=a.n(l);r.a}}]);