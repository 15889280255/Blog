(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27d1a373"],{"13eb":function(t,e,a){},"3a77":function(t,e,a){"use strict";var i=a("13eb"),o=a.n(i);o.a},"571f":function(t,e,a){},"5d0e":function(t,e,a){"use strict";var i=a("7562"),o=a.n(i);o.a},7562:function(t,e,a){},a55b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("el-card",{staticClass:"login-card",attrs:{header:"账号登录"}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.ruleForm.account,callback:function(e){t.$set(t.ruleForm,"account",e)},expression:"ruleForm.account"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),a("el-form-item",{staticClass:"btn-row"},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submitForm}},[a("span",{staticStyle:{color:"white","font-weight":"600"}},[t._v("账号 ")]),a("span",{staticClass:"iconfont",staticStyle:{color:"white","font-size":"20px"}},[t._v("")])]),a("el-button",{attrs:{type:"info",loading:t.githubLoading},on:{click:t.toGithub}},[a("span",{staticStyle:{color:"black","font-weight":"600"}},[t._v("Github ")]),a("span",{staticClass:"iconfont",staticStyle:{color:"black","font-size":"20px"}},[t._v("")])]),a("el-button",{attrs:{type:"warning"},on:{click:t.tourisLogin}},[a("span",{staticStyle:{color:"#752","font-weight":"600"}},[t._v("游客 ")]),a("span",{staticClass:"iconfont",staticStyle:{color:"#863","font-size":"20px"}},[t._v("")])])],1)],1)],1)],1)},o=[],s=a("7ded"),r={name:"Login",data(){return{loading:!1,ruleForm:{account:"",password:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},code:"",githubLoading:!1}},created(){this.code=window.location.search.split("=").pop()||"",this.code&&(this.githubLoading=!0,this.githubLogin(this.code))},methods:{submitForm(){this.$refs.ruleForm.validate(t=>{t&&this.loginF()})},async loginF(){const{account:t,password:e}=this.ruleForm;this.$loading.show();const a=await Object(s["c"])({account:t,password:e});this.setSessionStorage(a)},async tourisLogin(){this.$loading.show();const t=await Object(s["d"])();this.setSessionStorage(t)},toGithub(){this.githubLoading=!0,this.$loading.show();const t="https://github.com/login/oauth/authorize?client_id=811be2d52886c5979fde&redirect_uri=http://47.107.105.76/admin";window.location.href=t},async githubLogin(t){const e=await Object(s["b"])({code:t});if(1==e.status)return this.$message.error(e.msg),void this.$loading.hide();sessionStorage.setItem("info",JSON.stringify(e.data)),this.setSessionStorage(e)},setSessionStorage(t){t&&(sessionStorage.setItem("token",t.token),sessionStorage.setItem("account",t.data.account)),this.$router.push("/"),this.$loading.hide()}}},l=r,n=(a("bdc9"),a("2877")),c=Object(n["a"])(l,i,o,!1,null,"6a8d89ce",null);e["default"]=c.exports},bdc9:function(t,e,a){"use strict";var i=a("571f"),o=a.n(i);o.a},c2fa:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._v(t._s(t.id?"编辑":"新建")+"文章")]),a("el-form",{ref:"articleForm",attrs:{model:t.articleForm,rules:t.rules,"label-width":"100px"},nativeOn:{submit:function(e){return e.preventDefault(),t.saveArticle(e)}}},[a("el-form-item",{attrs:{label:"文章标题 :",prop:"title"}},[a("el-input",{model:{value:t.articleForm.title,callback:function(e){t.$set(t.articleForm,"title",e)},expression:"articleForm.title"}})],1),a("el-form-item",{attrs:{label:"文章类型 :",prop:"tags"}},[t.tagList?a("el-checkbox-group",{attrs:{size:"medium"},model:{value:t.articleForm.tags,callback:function(e){t.$set(t.articleForm,"tags",e)},expression:"articleForm.tags"}},t._l(t.tagList,(function(e){return a("el-checkbox-button",{key:e._id,attrs:{label:e._id}},[t._v(t._s(e.title))])})),1):t._e()],1),a("el-form-item",{attrs:{label:"设置置顶 :"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#666"},model:{value:t.articleForm.isTop,callback:function(e){t.$set(t.articleForm,"isTop",e)},expression:"articleForm.isTop"}}),a("span",{staticStyle:{"padding-left":"40px",color:"#606266"}},[t._v("设置可见 : ")]),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#666"},model:{value:t.articleForm.isShow,callback:function(e){t.$set(t.articleForm,"isShow",e)},expression:"articleForm.isShow"}})],1),a("el-form-item",{attrs:{label:"封 面 :"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.uploadHeaders,"show-file-list":!1,"on-success":t.handleThumbnailSuccess}},[t.articleForm.thumbnail?a("img",{staticClass:"avatar",attrs:{src:t.articleForm.thumbnail}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"文章内容 :",prop:"contentMd"}},[a("markdown-editor",{staticClass:"me-write-editor",attrs:{editor:t.editor},on:{changeEdit:t.changeEdit}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},o=[],s=a("52d5"),r=a("2423"),l=a("f8bc"),n={components:{MarkdownEditor:s["a"]},mixins:[l["a"]],props:{id:{type:String}},data(){return{tagList:[],articleForm:{title:"",tags:[],thumbnail:"",isTop:!1,isShow:!1,contentMd:"",contentHtml:""},editor:{value:"",ref:"",default_open:"edit",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,imagelink:!0,code:!0,fullscreen:!0,readmodel:!0,help:!0,undo:!0,redo:!0,trash:!1,ishljs:!0,navigation:!0,preview:!0}},rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:3,max:25,message:"长度在 3 到 25 个字符",trigger:"blur"}],tags:[{required:!0,message:"请选择文章标签",trigger:"change"}],contentMd:[{required:!0,message:"请输入文章内容",trigger:"blur"}]}}},created(){this.getTag(),this.id&&this.getArticle()},methods:{async getTag(){const t=await Object(r["g"])({page:1,pageSize:999});this.tagList=t.data.tagList},async getArticle(){const t=await Object(r["e"])({id:this.id});this.articleForm=t.data,this.editor.value=t.data.contentMd},saveArticle(){let t,e;t=this.id,this.$refs.articleForm.validate(async a=>{a?(e=t?await Object(r["h"])({id:this.id,article:this.articleForm}):await Object(r["a"])({article:this.articleForm}),0===e.status&&this.$router.push("/article/ArticleList")):this.$message.error("填写错误，请检查!")})},handleThumbnailSuccess(t){0==t.status?(this.$message.success(""+t.msg),this.articleForm.thumbnail=t.data.url):this.$message.error(""+t.msg)},changeEdit(t,e){this.articleForm.contentMd=e,this.articleForm.contentHtml=t}}},c=n,u=(a("3a77"),a("2877")),d=Object(u["a"])(c,i,o,!1,null,"58f01213",null);e["default"]=d.exports},d87b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._v("关于我")]),a("el-form",{attrs:{model:t.aboutForm,"label-width":"100px"},nativeOn:{submit:function(e){return e.preventDefault(),t.saveAbout(e)}}},[a("el-form-item",{attrs:{label:"LOGO :"}},[a("el-col",{attrs:{span:4}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.uploadHeaders,"show-file-list":!1,"on-success":t.handleThumbnailSuccess}},[t.aboutForm.logo?a("img",{staticClass:"avatar",attrs:{src:t.aboutForm.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"padding-bottom":"15px"},attrs:{label:"QQ : ",prop:"name"}},[a("el-input",{model:{value:t.aboutForm.qq,callback:function(e){t.$set(t.aboutForm,"qq",e)},expression:"aboutForm.qq"}})],1),a("el-form-item",{staticStyle:{"padding-bottom":"15px"},attrs:{label:"E-Mail : ",prop:"name"}},[a("el-input",{model:{value:t.aboutForm.e_mail,callback:function(e){t.$set(t.aboutForm,"e_mail",e)},expression:"aboutForm.e_mail"}})],1),a("el-form-item",{attrs:{label:"Github : ",prop:"name"}},[a("el-input",{model:{value:t.aboutForm.github,callback:function(e){t.$set(t.aboutForm,"github",e)},expression:"aboutForm.github"}})],1)],1)],1),a("el-form-item",{attrs:{label:"内容 :",prop:"contentMd"}},[a("markdown-editor",{staticClass:"me-write-editor",attrs:{editor:t.editor},on:{changeEdit:t.changeEdit}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},o=[],s=a("52d5"),r=a("f8bc"),l=a("8a43");function n(t){return Object(l["a"])({method:"put",url:"/about/update",data:t})}function c(){return Object(l["a"])({method:"get",url:"/about/info"})}var u={components:{MarkdownEditor:s["a"]},mixins:[r["a"]],data(){return{aboutForm:{id:"",logo:"",qq:"",e_mail:"",github:"",contentHtml:"",contentMd:""},editor:{value:"",ref:"",default_open:"edit",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,imagelink:!0,code:!0,fullscreen:!0,readmodel:!0,help:!0,undo:!0,redo:!0,trash:!1,ishljs:!0,navigation:!0,preview:!0}}}},mounted(){this.initAboutInfo()},methods:{async initAboutInfo(){const t=await c();t.data&&(this.aboutForm=Object.assign(this.aboutForm,t.data),this.aboutForm.id=t.data._id,this.editor.value=t.data.contentMd)},async saveAbout(){let t;this.aboutForm.id&&(t=this.aboutForm.id);const e=await n({id:t,about:this.aboutForm});0==e.status&&this.initAboutInfo()},handleThumbnailSuccess(t){0==t.status?(this.$message.success(""+t.msg),this.$set(this.aboutForm,"logo",t.data.url)):this.$message.error(""+t.msg)},changeEdit(t,e){this.aboutForm.contentMd=e,this.aboutForm.contentHtml=t}}},d=u,m=(a("5d0e"),a("2877")),h=Object(m["a"])(d,i,o,!1,null,"685b4046",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-27d1a373.cdfda31c.js.map