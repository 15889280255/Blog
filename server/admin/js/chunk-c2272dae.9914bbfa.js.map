{"version":3,"sources":["webpack:///./src/views/article/ArticleEdit.vue?5f9f","webpack:///./src/views/article/ArticleEdit.vue?8518","webpack:///src/views/article/ArticleEdit.vue","webpack:///./src/views/article/ArticleEdit.vue?ba79","webpack:///./src/views/article/ArticleEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","id","ref","attrs","articleForm","rules","nativeOn","$event","preventDefault","saveArticle","model","value","callback","$$v","$set","expression","_l","tag","key","_id","title","_e","staticStyle","uploadUrl","uploadHeaders","handleThumbnailSuccess","thumbnail","editor","on","changeEdit","staticRenderFns","components","mixins","mixins_upload","props","data","tagList","tags","isTop","isShow","contentMd","contentHtml","default_open","toolbars","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","imagelink","code","fullscreen","readmodel","help","undo","redo","trash","ishljs","navigation","preview","created","getTag","getArticle","computed","methods","$refs","validate","res","status","$message","success","url","error","md","html","component"],"mappings":"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","file":"js/chunk-c2272dae.9914bbfa.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=style&index=0&id=6487bba2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=style&index=0&id=6487bba2&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.id?'编辑':'新建')+\"文章\")]),_c('el-form',{ref:\"articleForm\",attrs:{\"model\":_vm.articleForm,\"rules\":_vm.rules,\"label-width\":\"100px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.saveArticle($event)}}},[_c('el-form-item',{attrs:{\"label\":\"文章标题 :\",\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.articleForm.title),callback:function ($$v) {_vm.$set(_vm.articleForm, \"title\", $$v)},expression:\"articleForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文章类型 :\",\"prop\":\"tags\"}},[(_vm.tagList)?_c('el-checkbox-group',{attrs:{\"size\":\"medium\"},model:{value:(_vm.articleForm.tags),callback:function ($$v) {_vm.$set(_vm.articleForm, \"tags\", $$v)},expression:\"articleForm.tags\"}},_vm._l((_vm.tagList),function(tag){return _c('el-checkbox-button',{key:tag._id,attrs:{\"label\":tag._id}},[_vm._v(_vm._s(tag.title))])}),1):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"设置置顶 :\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#666\"},model:{value:(_vm.articleForm.isTop),callback:function ($$v) {_vm.$set(_vm.articleForm, \"isTop\", $$v)},expression:\"articleForm.isTop\"}}),_c('span',{staticStyle:{\"padding-left\":\"40px\",\"color\":\"#606266\"}},[_vm._v(\"设置可见 : \")]),_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#666\"},model:{value:(_vm.articleForm.isShow),callback:function ($$v) {_vm.$set(_vm.articleForm, \"isShow\", $$v)},expression:\"articleForm.isShow\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封 面 :\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"headers\":_vm.uploadHeaders,\"show-file-list\":false,\"on-success\":_vm.handleThumbnailSuccess}},[(_vm.articleForm.thumbnail)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.articleForm.thumbnail}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"文章内容 :\",\"prop\":\"contentMd\"}},[_c('markdown-editor',{staticClass:\"me-write-editor\",attrs:{\"editor\":_vm.editor},on:{\"changeEdit\":_vm.changeEdit}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h2 class=\"title\">{{id?'编辑':'新建'}}文章</h2>\r\n    <el-form\r\n      :model=\"articleForm\"\r\n      ref=\"articleForm\"\r\n      :rules=\"rules\"\r\n      label-width=\"100px\"\r\n      @submit.native.prevent=\"saveArticle\"\r\n    >\r\n      <el-form-item label=\"文章标题 :\" prop=\"title\">\r\n        <el-input v-model=\"articleForm.title\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"文章类型 :\" prop=\"tags\">\r\n        <el-checkbox-group v-if=\"tagList\" v-model=\"articleForm.tags\" size=\"medium\">\r\n          <el-checkbox-button v-for=\"tag in tagList\" :label=\"tag._id\" :key=\"tag._id\">{{tag.title}}</el-checkbox-button>\r\n        </el-checkbox-group>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"设置置顶 :\">\r\n        <el-switch v-model=\"articleForm.isTop\" active-color=\"#13ce66\" inactive-color=\"#666\"></el-switch>\r\n        <span style=\"padding-left:40px;color:#606266\">设置可见 :&nbsp;</span>\r\n        <el-switch v-model=\"articleForm.isShow\" active-color=\"#13ce66\" inactive-color=\"#666\"></el-switch>\r\n      </el-form-item>\r\n      <el-form-item label=\"封 面 :\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"uploadUrl\"\r\n          :headers=\"uploadHeaders\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleThumbnailSuccess\"\r\n        >\r\n          <img v-if=\"articleForm.thumbnail\" :src=\"articleForm.thumbnail\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"文章内容 :\" prop=\"contentMd\">\r\n        <markdown-editor :editor=\"editor\" class=\"me-write-editor\" @changeEdit=\"changeEdit\"></markdown-editor>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MarkdownEditor from \"@/components/MarkdownEditor\";\r\nimport {\r\n  getTagList,\r\n  addArticle,\r\n  getArticleInfo,\r\n  updateArticle\r\n} from \"@/api/article\";\r\nimport mixins_upload from \"../../utils/mixins_upload\";\r\nexport default {\r\n  components: { MarkdownEditor },\r\n  mixins: [mixins_upload],\r\n  props: {\r\n    id: { type: String }\r\n  },\r\n  data() {\r\n    return {\r\n      tagList: [],\r\n      articleForm: {\r\n        title: \"\",\r\n        tags: [],\r\n        thumbnail: \"\",\r\n        isTop: false,\r\n        isShow: false,\r\n        contentMd: \"\",\r\n        contentHtml: \"\"\r\n      },\r\n      editor: {\r\n        value: \"\",\r\n        ref: \"\", //保存mavonEditor实例  实际不该这样\r\n        default_open: \"edit\",\r\n        toolbars: {\r\n          bold: true, // 粗体\r\n          italic: true, // 斜体\r\n          header: true, // 标题\r\n          underline: true, // 下划线\r\n          strikethrough: true, // 中划线\r\n          mark: true, // 标记\r\n          superscript: true, // 上角标\r\n          subscript: true, // 下角标\r\n          quote: true, // 引用\r\n          ol: true, // 有序列表\r\n          ul: true, // 无序列表\r\n          imagelink: true, // 图片链接\r\n          code: true, // code\r\n          fullscreen: true, // 全屏编辑\r\n          readmodel: true, // 沉浸式阅读\r\n          help: true, // 帮助\r\n          undo: true, // 上一步\r\n          redo: true, // 下一步\r\n          trash: false, // 清空\r\n          ishljs: true,\r\n          navigation: true, // 导航目录\r\n          preview: true // 预览\r\n        }\r\n      },\r\n      rules: {\r\n        title: [\r\n          { required: true, message: \"请输入文章标题\", trigger: \"blur\" },\r\n          { min: 3, max: 25, message: \"长度在 3 到 25 个字符\", trigger: \"blur\" }\r\n        ],\r\n        tags: [\r\n          { required: true, message: \"请选择文章标签\", trigger: \"change\" }\r\n        ],\r\n        contentMd: [\r\n          { required: true, message: \"请输入文章内容\", trigger: \"blur\" }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getTag();\r\n    this.id && this.getArticle();\r\n  },\r\n  // watch: {\r\n  //   // 属性侦听\r\n  //   'editor.value': function(o) {\r\n  //     this.articleForm.contentMd = o;\r\n  //   },\r\n  //   deep: true //侦听对象的属性\r\n  // },\r\n  computed: {},\r\n  methods: {\r\n    async getTag() {\r\n      const res = await getTagList({ page: 1, pageSize: 999 });\r\n      this.tagList = res.data.tagList;\r\n    },\r\n\r\n    async getArticle() {\r\n      const res = await getArticleInfo({ id: this.id });\r\n      this.articleForm = res.data;\r\n      this.editor.value = res.data.contentMd;\r\n    },\r\n\r\n    saveArticle() {\r\n      let id, res;\r\n      id = this.id;\r\n      this.$refs.articleForm.validate(async valid => {\r\n        if (!valid) {\r\n          this.$message.error(\"填写错误，请检查!\");\r\n          return;\r\n        } else {\r\n          if (id) {\r\n            res = await updateArticle({\r\n              id: this.id,\r\n              article: this.articleForm\r\n            });\r\n          } else {\r\n            res = await addArticle({ article: this.articleForm });\r\n          }\r\n          if (res.status === 0) this.$router.push(\"/article/ArticleList\");\r\n        }\r\n      });\r\n    },\r\n\r\n    handleThumbnailSuccess(res) {\r\n      if (res.status == 0) {\r\n        this.$message.success(`${res.msg}`);\r\n        this.articleForm.thumbnail = res.data.url;\r\n      } else {\r\n        this.$message.error(`${res.msg}`);\r\n      }\r\n    },\r\n\r\n    changeEdit(html, md) {\r\n      this.articleForm.contentMd = md;\r\n      this.articleForm.contentHtml = html;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.title {\r\n  text-align: center;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleEdit.vue?vue&type=template&id=6487bba2&scoped=true&\"\nimport script from \"./ArticleEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleEdit.vue?vue&type=style&index=0&id=6487bba2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6487bba2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}