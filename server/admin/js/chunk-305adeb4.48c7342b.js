(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-305adeb4"],{"733c":function(t,o,s){"use strict";var e=s("d1f9"),i=s.n(e);i.a},a55b:function(t,o,s){"use strict";s.r(o);var e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"login"},[s("el-card",{staticClass:"login-card",attrs:{header:"账号登录"}},[s("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules}},[s("el-form-item",{attrs:{label:"账号",prop:"account"}},[s("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.ruleForm.account,callback:function(o){t.$set(t.ruleForm,"account",o)},expression:"ruleForm.account"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.ruleForm.password,callback:function(o){t.$set(t.ruleForm,"password","string"===typeof o?o.trim():o)},expression:"ruleForm.password"}})],1),s("el-form-item",{staticClass:"btn-row"},[s("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submitForm}},[s("span",{staticStyle:{color:"white","font-weight":"600"}},[t._v("账号 ")]),s("span",{staticClass:"iconfont",staticStyle:{color:"white","font-size":"20px"}},[t._v("")])]),s("el-button",{attrs:{type:"info",loading:t.githubLoading},on:{click:t.toGithub}},[s("span",{staticStyle:{color:"black","font-weight":"600"}},[t._v("Github ")]),s("span",{staticClass:"iconfont",staticStyle:{color:"black","font-size":"20px"}},[t._v("")])]),s("el-button",{attrs:{type:"warning"},on:{click:t.tourisLogin}},[s("span",{staticStyle:{color:"#752","font-weight":"600"}},[t._v("游客 ")]),s("span",{staticClass:"iconfont",staticStyle:{color:"#863","font-size":"20px"}},[t._v("")])])],1)],1)],1)],1)},i=[],a=s("7ded"),r={name:"Login",data(){return{loading:!1,ruleForm:{account:"",password:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},code:"",githubLoading:!1}},created(){this.code=window.location.search.split("=").pop()||"",this.code&&(this.githubLoading=!0,this.githubLogin(this.code))},methods:{submitForm(){this.$refs.ruleForm.validate(t=>{t&&this.loginF()})},async loginF(){const{account:t,password:o}=this.ruleForm;this.$loading.show();const s=await Object(a["c"])({account:t,password:o});this.setSessionStorage(s)},async tourisLogin(){this.$loading.show();const t=await Object(a["d"])();this.setSessionStorage(t)},toGithub(){this.githubLoading=!0,this.$loading.show();const t="https://github.com/login/oauth/authorize?client_id=811be2d52886c5979fde&redirect_uri=http://www.xujinfeng.top/admin";window.location.href=t},async githubLogin(t){const o=await Object(a["b"])({code:t});if(1==o.status)return this.$message.error(o.msg),void this.$loading.hide();sessionStorage.setItem("info",JSON.stringify(o.data)),this.setSessionStorage(o)},setSessionStorage(t){t&&(sessionStorage.setItem("token",t.token),sessionStorage.setItem("account",t.data.account),sessionStorage.setItem("role",t.data.role)),this.$router.push("/"),this.$loading.hide()}}},n=r,c=(s("733c"),s("2877")),l=Object(c["a"])(n,e,i,!1,null,"2918735a",null);o["default"]=l.exports},d1f9:function(t,o,s){}}]);